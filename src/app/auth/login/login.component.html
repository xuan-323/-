<div class="login-container">
    
    @if (errorMessage) {
        <div class="error-message">{{ errorMessage }}</div>
    }
    @if (resetMessage) {
        <div class="success-message">{{ resetMessage }}</div>
    }
    
    <h1>ğŸ½ï¸ æœƒå“¡ç™»å…¥</h1>
    <p class="subtitle">æ­¡è¿å›ä¾†ï¼Œè®“æˆ‘å€‘æ‰¾åˆ°ä½ çš„é£¯æ­å­ï¼</p>
    
    <p class="forgot-password-area">
        <a (click)="toggleResetForm()" class="app-link">
            @if (!showResetForm) {
                <span>å¿˜è¨˜å¯†ç¢¼ï¼Ÿ</span>
            } @else {
                <span>è¿”å›ç™»å…¥</span>
            }
        </a>
    </p>

    @if (showResetForm) {
        <div class="reset-form-box">
            <p>è«‹è¼¸å…¥æ‚¨çš„ä¿¡ç®±ï¼Œæˆ‘å€‘å°‡ç™¼é€é‡è¨­é€£çµï¼š</p>
            
            <input id="email" type="email" formControlName="email">
            
            <button (click)="onForgotPassword()" [disabled]="isLoading">
                @if (isLoading) {
                    <span class="loading-content">
                        <div class="spinner"></div> æ­£åœ¨ç™¼é€...
                    </span>
                } @else {
                    <span>
                        ç™¼é€é‡è¨­éƒµä»¶
                    </span>
                }
            </button>
        </div>
    } @else {
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

            <div class="form-group">
                <label for="email">é›»å­éƒµä»¶</label>
                <input id="email" type="email" formControlName="email">
            </div>

            <div class="form-group">
                <label for="password">å¯†ç¢¼</label>
                <input id="password" type="password" formControlName="password">
            </div>

            <button type="submit" [disabled]="isLoading">
                @if (isLoading) {
                    <span class="loading-content">
                        <div class="spinner"></div> æ­£åœ¨ç™»å…¥...
                    </span>
                } @else if (errorMessage) {
                    <span class="fail-text">
                        ç™»å…¥å¤±æ•—ï¼Œè«‹é‡è©¦
                    </span>
                } @else {
                    <span>
                        ç™»å…¥
                    </span>
                }
            </button>
            
            @if (showLoginFailPrompt) {
                <div class="fail-prompt-box">
                    <p>ğŸ’¡ å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ã€‚éœ€è¦é‡è¨­å¯†ç¢¼å—ï¼Ÿ</p>
                    <a (click)="toggleResetForm()" class="app-link">
                        é»æ“Šé€™è£¡ç™¼é€é‡è¨­éƒµä»¶
                    </a>
                </div>
            }
            
        </form>
    }
    
    <p class="link-area">
        é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ <a [routerLink]="['/auth/signup']" class="app-link">ç«‹å³è¨»å†Š</a>
    </p>
</div>